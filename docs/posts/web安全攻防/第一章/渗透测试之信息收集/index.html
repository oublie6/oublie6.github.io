<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>web安全攻防-第一章-渗透测试之信息收集 - Oublie的Hugo博客</title><meta name="Description" content="Oublie的Hugo博客"><meta property="og:title" content="web安全攻防-第一章-渗透测试之信息收集" />
<meta property="og:description" content="渗透测试之前的工作——信息收集。收集服务器的配置信息和网站的敏感信息，包括域名及子域名信息、目标网站系统 CMS 指纹、目标网站真实IP、开放的端口" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" /><meta property="og:image" content="https://oublie6.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-02T15:06:06+08:00" />
<meta property="article:modified_time" content="2022-10-02T15:06:06+08:00" /><meta property="og:site_name" content="我的网站" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://oublie6.github.io/logo.png"/>

<meta name="twitter:title" content="web安全攻防-第一章-渗透测试之信息收集"/>
<meta name="twitter:description" content="渗透测试之前的工作——信息收集。收集服务器的配置信息和网站的敏感信息，包括域名及子域名信息、目标网站系统 CMS 指纹、目标网站真实IP、开放的端口"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/%e5%a4%b4%e5%83%8f.jpeg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" /><link rel="prev" href="https://oublie6.github.io/posts/python/anaconda3/anaconda3%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" /><link rel="next" href="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%BA%8C%E7%AB%A0/%E6%90%AD%E5%BB%BA%E6%BC%8F%E6%B4%9E%E7%8E%AF%E5%A2%83%E5%8F%8A%E5%AE%9E%E6%88%98/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "web安全攻防-第一章-渗透测试之信息收集",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/oublie6.github.io\/posts\/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2\/%E7%AC%AC%E4%B8%80%E7%AB%A0\/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\/"
        },"genre": "posts","keywords": "web安全攻防","wordcount":  4528 ,
        "url": "https:\/\/oublie6.github.io\/posts\/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2\/%E7%AC%AC%E4%B8%80%E7%AB%A0\/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\/","datePublished": "2022-10-02T15:06:06+08:00","dateModified": "2022-10-02T15:06:06+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "oublie"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Oublie的Hugo博客">Oublie的Hugo博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Oublie的Hugo博客">Oublie的Hugo博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">web安全攻防-第一章-渗透测试之信息收集</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://oublie6.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>oublie</a></span>&nbsp;<span class="post-category">included in <a href="/categories/%E5%AE%89%E5%85%A8/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>安全</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-10-02">2022-10-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;4528 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;10 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#收集域名信息">收集域名信息</a>
      <ul>
        <li><a href="#whois-查询">Whois 查询</a></li>
        <li><a href="#备案信息查询">备案信息查询</a></li>
      </ul>
    </li>
    <li><a href="#收集敏感信息">收集敏感信息</a></li>
    <li><a href="#收集子域名信息">收集子域名信息</a>
      <ul>
        <li><a href="#1-子域名检测工具">1. 子域名检测工具</a></li>
        <li><a href="#2-第三方聚合应用枚举">2. 第三方聚合应用枚举</a></li>
        <li><a href="#3-证书透明度公开曰志枚举">3. 证书透明度公开曰志枚举</a></li>
      </ul>
    </li>
    <li><a href="#收集常用端口信息">收集常用端口信息</a>
      <ul>
        <li><a href="#-文件共享服务端口">+ 文件共享服务端口</a></li>
        <li><a href="#-远程连接服务端口">+ 远程连接服务端口</a></li>
        <li><a href="#-web-应用服务端口">+ web 应用服务端口</a></li>
        <li><a href="#-数据库服务端口">+ 数据库服务端口</a></li>
        <li><a href="#-邮件服务端口">+ 邮件服务端口</a></li>
        <li><a href="#-网络常见协议端口">+ 网络常见协议端口</a></li>
        <li><a href="#-特殊服务端口">+ 特殊服务端口</a></li>
      </ul>
    </li>
    <li><a href="#指纹识别">指纹识别</a></li>
    <li><a href="#查找真实ip">查找真实IP</a>
      <ul>
        <li><a href="#1-目标服务器存在-cdn">1. 目标服务器存在 CDN</a></li>
        <li><a href="#2-判断目标是否使用了-cdn">2. 判断目标是否使用了 CDN</a></li>
        <li><a href="#3-绕过-cdn-寻找真实-ip">3. 绕过 CDN 寻找真实 IP</a></li>
        <li><a href="#4-验证获取的-ip">4. 验证获取的 IP</a></li>
      </ul>
    </li>
    <li><a href="#收集敏感目录文件">收集敏感目录文件</a></li>
    <li><a href="#社会工程学">社会工程学</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>渗透测试之前的工作——信息收集。收集服务器的配置信息和网站的敏感信息，包括域名及子域名信息、目标网站系统 CMS 指纹、目标网站真实IP、开放的端口等。</p>
<h2 id="收集域名信息">收集域名信息</h2>
<p>知道目标的域名之后，要做的第一件事就是获取域名的注册信息，包括域名DNS服务器信息和注册人的联系信息等。域名信息收集的常用方法有以下这几种</p>
<h3 id="whois-查询">Whois 查询</h3>
<p>Whois 是一个标准的互联网协议。用于收集网络注册信息，注册的域名、 IP地址等信息。kali linux 默认安装。</p>
<p>在线Whois 查询的常用网站有爱站工具网 （https: //whois.aizhan.com ）、站长之家( http: //whois.chinaz.com ）和VirusTotal ( https: //www.virustotal.com ），通过这些网站可以查询域名的相关信息，如域名服务商、域名拥有者，以及他们的邮箱、电话、地址等。</p>
<h3 id="备案信息查询">备案信息查询</h3>
<p>网站备案是根据国家法律法规规定，需要网站的所有者向国家有关部 门申请的备案，这是国家信息产业部对网站的一种管理，为了防止在网上从事非法的网站经营活动的发生 主要针对国内网站，如果网站搭建在其他国家，则不需要进行备案。</p>
<p>常用的网站有以下这两个</p>
<ul>
<li>ICP备案查询网： http: //www.beianbeian.com</li>
<li>天眼查 http //www.tianyancha.com</li>
</ul>
<h2 id="收集敏感信息">收集敏感信息</h2>
<p>Google是世界上最强的搜索引擎之一，对 位渗透测试者而言，它可能是一款绝佳的黑客工具 我们可以通过构造特殊的关键宇语法来搜索互联网上的相关敏感信下面列举了 Google 的常用语法及其说明：</p>
<table>
<thead>
<tr>
<th style="text-align:center">关键字</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Site</td>
<td style="text-align:center">指定域名</td>
</tr>
<tr>
<td style="text-align:center">Inurl</td>
<td style="text-align:center">URL 中存在关键字的网页</td>
</tr>
<tr>
<td style="text-align:center">Intext</td>
<td style="text-align:center">网页正文中的关键字</td>
</tr>
<tr>
<td style="text-align:center">Filetype</td>
<td style="text-align:center">指定文件类型</td>
</tr>
<tr>
<td style="text-align:center">Intitie</td>
<td style="text-align:center">网页标题中的关键字</td>
</tr>
<tr>
<td style="text-align:center">link</td>
<td style="text-align:center">link:baidu.com 即表示返回所有和 baidu.com 做了链接的 URL</td>
</tr>
<tr>
<td style="text-align:center">Info</td>
<td style="text-align:center">查找指定站点的一些基本信息</td>
</tr>
<tr>
<td style="text-align:center">cache</td>
<td style="text-align:center">搜索 Google 里关于某些内容的缓存</td>
</tr>
</tbody>
</table>
<p>举个例子，一些学校网站的后台，语法为“site:edu.cn intext：后台管理”， 是搜索网页正文中含有“后台管理”并且域名后缀是edu.cn 的网站。</p>
<p>利用Go 搜索，我们可以很轻松地得到想要的信息，还可以用它来收集数据库文件、SQL 注入、配置信息、源代码泄露、未授权访问和robot.txt等敏感信息。</p>
<p>除了google相同的思路还可以使用百度、雅虎 Bing，Shodan等搜索引擎上，其语法也大同小异。</p>
<p>另外，通过Burp Repeater功能同样可以获取一些服务器的信息，如运行Server 类型及版本、 PHP 版本信息等。</p>
<p>除此之外，也可以 GitHub 找相关敏感信息，如数据库连接信息、邮箱密码、 uc-key 、阿里的 osskey ，有时还可以找到泄露的源代码等。
读者可以通过乌云漏洞表（ https ://wooyun .s hu mugan com ）查询历史漏洞信息。</p>
<h2 id="收集子域名信息">收集子域名信息</h2>
<p>子域名就是二级域名，指顶级域名下的域名。假设我们的目标网络较大，直接从主域入手显 很不理智，因为对于这种规模的目标， 其主域都是重点防护区域，所以不如先进入目标的某 子域，然后再想办 迂回接近真正的目标，这无疑是个比较好的选择。</p>
<h3 id="1-子域名检测工具">1. 子域名检测工具</h3>
<p>用于域名检测的工具主要有<code>Layer子域名挖掘机</code>、K8、wydomain、<code>Sublist3r</code>、dnsmaper 、<code>subDomainsBrute</code> 、Maltego CE等。</p>
<ol>
<li>搜索引擎枚举</li>
</ol>
<p>Google</p>
<h3 id="2-第三方聚合应用枚举">2. 第三方聚合应用枚举</h3>
<p>很多第三方服务汇聚了大量DNS数据 ，可通过它们检索某个给定域名的子域名。</p>
<p>读者也可以利 DNSdumpster 网站（dnsdumpster.com）、在线DNS侦查和搜索的工具挖掘出指定域潜藏的大量子域。</p>
<h3 id="3-证书透明度公开曰志枚举">3. 证书透明度公开曰志枚举</h3>
<p>证书透明度（ Certificate Transparency, CT ）是证书授权机构（CA）的一个项目，证书授权机构会将每个SSL/TLS 证书发布到公共日志中 。其通常包含域名、子域名和邮件地址，这些也经常成为攻击者非常希望获得的有用信息。查找某个域名所属证书的最简单的方法就是使用搜索引擎搜索公开的CT日志。</p>
<p>两个网站crt.sh: <a href="https://crt.sh" target="_blank" rel="noopener noreffer ">https://crt.sh</a> 和 censys:https://censys.io</p>
<p>此外，还可以利用一些在线网站查询子域名，如子域名爆破网站（https://phpinfo.me/domain), IP反查绑定域名网站 （https://dns.aizhan.com ）等</p>
<h2 id="收集常用端口信息">收集常用端口信息</h2>
<p>通过扫描服务器开放的端口以及从该端口判断服务器上存在的服务。最常见的扫描工具是Nmap （具体的使用方法后续章节会详细介绍），无状态端口扫描工具Masscan ZMap和御剑高速TCP端口扫描工具</p>
<p>常见端口机器说明以及攻击方向汇总</p>
<h3 id="-文件共享服务端口">+ 文件共享服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">21/22/69</td>
<td style="text-align:center">Ftp ftp 文件传输协议</td>
<td style="text-align:center">允许匿名名的上传、下载、爆破和嗅探操作</td>
</tr>
<tr>
<td style="text-align:center">2049</td>
<td style="text-align:center">Nf 服务</td>
<td style="text-align:center">配置不当</td>
</tr>
<tr>
<td style="text-align:center">139</td>
<td style="text-align:center">Samba服务</td>
<td style="text-align:center">爆破、未授权访问、远程代码执行</td>
</tr>
<tr>
<td style="text-align:center">389</td>
<td style="text-align:center">Ldap目录访问协议</td>
<td style="text-align:center">注入、允许匿名访问、弱口令</td>
</tr>
</tbody>
</table>
<h3 id="-远程连接服务端口">+ 远程连接服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">22</td>
<td style="text-align:center">SSH远程连接</td>
<td style="text-align:center">爆破、SSH隧道及内网代理转发、文件传输</td>
</tr>
<tr>
<td style="text-align:center">23</td>
<td style="text-align:center">Telnet远程连接</td>
<td style="text-align:center">爆破、嗅探、弱口令</td>
</tr>
<tr>
<td style="text-align:center">3389</td>
<td style="text-align:center">Rdp远程桌面连接</td>
<td style="text-align:center">Shift后门（Windows2003以下的系统）、爆破</td>
</tr>
<tr>
<td style="text-align:center">5900</td>
<td style="text-align:center">VNC</td>
<td style="text-align:center">弱口令爆破</td>
</tr>
<tr>
<td style="text-align:center">5632</td>
<td style="text-align:center">PyAnywhere服务</td>
<td style="text-align:center">抓密码、代码执行</td>
</tr>
</tbody>
</table>
<h3 id="-web-应用服务端口">+ web 应用服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">80/443/8080</td>
<td style="text-align:center">常见 Web 服务端口</td>
<td style="text-align:center">Web 攻击、 爆破、对应服务器版本漏洞</td>
</tr>
<tr>
<td style="text-align:center">7001 /7002</td>
<td style="text-align:center">WebLogic 控制台</td>
<td style="text-align:center">Java 反序列化、弱口令</td>
</tr>
<tr>
<td style="text-align:center">8080/8089</td>
<td style="text-align:center">Jboss/Resin/Jetty/Jenkins</td>
<td style="text-align:center">反序列化、控制台弱口令</td>
</tr>
<tr>
<td style="text-align:center">9090</td>
<td style="text-align:center">WebSphere 控制台</td>
<td style="text-align:center">Java 反序列化、弱口令</td>
</tr>
<tr>
<td style="text-align:center">4848</td>
<td style="text-align:center">Glassfi 控制台</td>
<td style="text-align:center">弱口令</td>
</tr>
<tr>
<td style="text-align:center">1352</td>
<td style="text-align:center">Lotus domino 邮件服务</td>
<td style="text-align:center">弱口令、信息泄露、爆破</td>
</tr>
<tr>
<td style="text-align:center">10000</td>
<td style="text-align:center">Webmin-Wen 控制面板</td>
<td style="text-align:center">弱口令</td>
</tr>
</tbody>
</table>
<h3 id="-数据库服务端口">+ 数据库服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">3306</td>
<td style="text-align:center">MySQL</td>
<td style="text-align:center">注入、提权、爆破</td>
</tr>
<tr>
<td style="text-align:center">1433</td>
<td style="text-align:center">MSSQL 数据库</td>
<td style="text-align:center">注入、提权、 SA 弱口令、爆破</td>
</tr>
<tr>
<td style="text-align:center">1521</td>
<td style="text-align:center">Oracle 数据库</td>
<td style="text-align:center">TNS 爆破、注入、反弹 Shell</td>
</tr>
<tr>
<td style="text-align:center">5432</td>
<td style="text-align:center">Postgr SQL 数据库</td>
<td style="text-align:center">爆破、注入、弱口令</td>
</tr>
<tr>
<td style="text-align:center">27017/27018</td>
<td style="text-align:center">MongoDB</td>
<td style="text-align:center">爆破、未授权访问</td>
</tr>
<tr>
<td style="text-align:center">6379</td>
<td style="text-align:center">Redis 数据库</td>
<td style="text-align:center">可尝试未授权访问、弱口令爆破</td>
</tr>
<tr>
<td style="text-align:center">5000</td>
<td style="text-align:center">SysBase/DB2 数据库</td>
<td style="text-align:center">爆破、注入</td>
</tr>
</tbody>
</table>
<h3 id="-邮件服务端口">+ 邮件服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">25</td>
<td style="text-align:center">SMTP 邮件服务</td>
<td style="text-align:center">邮件伪造</td>
</tr>
<tr>
<td style="text-align:center">110</td>
<td style="text-align:center">POP3 协议</td>
<td style="text-align:center">爆破、嗅探</td>
</tr>
<tr>
<td style="text-align:center">143</td>
<td style="text-align:center">IMAP协议</td>
<td style="text-align:center">爆破</td>
</tr>
</tbody>
</table>
<h3 id="-网络常见协议端口">+ 网络常见协议端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">53</td>
<td style="text-align:center">DNS 域名系统</td>
<td style="text-align:center">允许区域传送、 NS 劫持、缓存投毒、欺骗</td>
</tr>
<tr>
<td style="text-align:center">67/68</td>
<td style="text-align:center">DHCP 服务</td>
<td style="text-align:center">劫持、欺骗</td>
</tr>
<tr>
<td style="text-align:center">161</td>
<td style="text-align:center">SNMP 协议</td>
<td style="text-align:center">爆破、搜集目标内网信息</td>
</tr>
</tbody>
</table>
<h3 id="-特殊服务端口">+ 特殊服务端口</h3>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:center">端口说明</th>
<th style="text-align:center">攻击方向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2181</td>
<td style="text-align:center">Zookeeper服务</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td style="text-align:center">8069</td>
<td style="text-align:center">Zabbix服务</td>
<td style="text-align:center">远程执行、SQL注入</td>
</tr>
<tr>
<td style="text-align:center">9200/9300</td>
<td style="text-align:center">Elasticsearch服务</td>
<td style="text-align:center">远程执行</td>
</tr>
<tr>
<td style="text-align:center">11211</td>
<td style="text-align:center">Mencache服务</td>
<td style="text-align:center">未授权访问</td>
</tr>
<tr>
<td style="text-align:center">512/513/514</td>
<td style="text-align:center">Linux Rexec服务</td>
<td style="text-align:center">爆破、Rlogin登录</td>
</tr>
<tr>
<td style="text-align:center">873</td>
<td style="text-align:center">Rsync服务</td>
<td style="text-align:center">匿名访问、文件上传</td>
</tr>
<tr>
<td style="text-align:center">50000</td>
<td style="text-align:center">SAP Management Console</td>
<td style="text-align:center">远程执行</td>
</tr>
</tbody>
</table>
<h2 id="指纹识别">指纹识别</h2>
<p>指纹由于其终身不变性、唯一性和方便性，几乎己成为生物特征识别的代名词。而本节所讲的指纹是指网站CMS指纹识别、计算机操作系统及Web容器的指纹识别等。</p>
<p>应用程序一般在其html、js、css文件中多多少少会包含一些特征码，比如WordPress 的robots.txt 中会包含wp-admin 、首页index。php 中会包含generator=wordpress 3.xx ，这个特征就是这个CMS 的指纹，那么当碰到其他网站也存在此特征时，就可以快速识别出该CMS ，所以叫作指纹识别。</p>
<p>在渗透测试中，对目标服务器进行指纹识别是相当有必要的，因为只有识别出相应的Web容器或者CMS ，才能查找与其相关的漏洞，然后才能进行相应的渗透操作。</p>
<p>CMS (Content Management System ）又称整站系统或文章系统。在2004年以前，如果想进行网站内容管理， 本上都 手工维护，但在信息爆炸的时代，完全靠手工完成会相当痛苦 所以就出现了CMS ，开发者只要给客户一个软件包，客户自己安装配置好，就可以定期更 数据来维护网站，节省了大量的人力和物力。</p>
<p>常见的CMS Dedecms （织梦）、 Discuz PHPWEB 、PHPWind 、 PHPCMS 、 ECShop 、Dvbbs SiteWeaver 、 ASPCMS 、帝国、 Z-Blog 、 WordPress等。</p>
<p>代表工具有御剑Web 指纹识别、 WhatWeb 、 WebRobo 、椰树、轻量WEB指纹识别等</p>
<p>除了这些工具，读者还可以利用在线网站查询CMS指纹识别，如下所示</p>
<ul>
<li>BugScaner: <a href="http://whatweb.bugscaner.corn/look/" target="_blank" rel="noopener noreffer ">http://whatweb.bugscaner.corn/look/</a></li>
<li>云悉指纹： <a href="http://www.yunsee.cn/finger.html" target="_blank" rel="noopener noreffer ">http://www.yunsee.cn/finger.html</a></li>
<li>WhatWeb: <a href="https://whatweb.net/" target="_blank" rel="noopener noreffer ">https://whatweb.net/</a></li>
</ul>
<h2 id="查找真实ip">查找真实IP</h2>
<p>在渗透测试过程中，目标服务器可能只有一个域名，那么如何通过这个域名来确定目标服务器的真实IP对渗透测试来说就很重要 如果目标服务器不存在CDN,可以直接通过www.ip138.com获取目标的 IP 及域名信息 这里主要讲解在以下这几种情况下，如何绕过CDN寻找目标服务器的真实IP。</p>
<h3 id="1-目标服务器存在-cdn">1. 目标服务器存在 CDN</h3>
<p>CDN即内容分发网络，主要解决因传输距离和不同运营商节点造成的网络速度性能低下的问题，说得简单点，就是 组在不同运营商之间的对接节点上的高速缓存服务器，把用户经常访问的静态数据资源（例如静态的html css js 图片等文件）直接缓存到节点服务器上，当用户再次请求时，会直接分发到在离用户近的节点服务器上响应给用户，当用户有实际数据交互时才会从远程Web服务器上响应，这样可大大提高网站的响应速度及用户体验。</p>
<p>所以如果渗透目标购买了CDN服务，可以直接 ping 目标的域名，但得到的并非真正的目标Web 服务器，只是离我们最近的一台目标节点的CDN服务器， 这就导致没法直接得到目标的真实IP段范围。</p>
<h3 id="2-判断目标是否使用了-cdn">2. 判断目标是否使用了 CDN</h3>
<p>通常会通过ping 目标主域，观察域名的解析情况，以此来判断其是否使用了 CDN 。</p>
<p>还可以利用在线网站 17CE （https://www.l7ce.com）进行全国多地区的ping服务器操作，然后对比每个地区ping 出的IP 结果，查看这些IP是否 致，如果都是一样的，极有可能不存在CDN。 如果IP 大多不太一样或者规律性很强，可尝试查询这些IP的归属地，判断是否存在CDN。</p>
<h3 id="3-绕过-cdn-寻找真实-ip">3. 绕过 CDN 寻找真实 IP</h3>
<p>在确认了目标确实用了 CDN 以后，就需要绕过CDN寻找目标的真实IP</p>
<ul>
<li>内部邮箱源。一般的邮件系统都在内部，没有经过CDN 解析，通过目标网站用户注册或者RSS订阅功能，查看邮件、寻找邮件头中的邮件服务器域IP, ping这个邮件服务器的域名 就可获得目标真实IP（注意 ，必须是目标自己的邮件服务器，第三方或公共邮件服务器是没有用）</li>
<li>扫描网站测试文件，如phpinfo、test等，从而找到目标的真实IP</li>
<li>分站域名 网站主站的访问量会比较大，所以主站都是挂CDN ，但是分站可能没有挂CDN ，可以通过ping 二级域名获取分站IP ，可能会出现分站和主站不是同一个IP但在同一个C段下面的情况，从而能判断出目标的真实IP段。</li>
<li>国外访问。国内的CDN往往只对国内用户的访问加速，而国外的CDN就不一定了。因此，通过国外在线代理网站App Synthetic Monitor （https://asm.ca.com/ping.php ）访问，可能会 到真实的IP ，</li>
<li>查询域名的解析记录。 也许目标很久以前并没有用 CDN，所以可以通过网站NETCRAFT （https://www.netcraft.com/ ）来观察域名的IP历史记录，也可以大致分析出目标的真实IP段。</li>
<li>APP抓包。Fiddler 或 Burp Suite</li>
<li>绕过CloudFlare CDN。</li>
</ul>
<h3 id="4-验证获取的-ip">4. 验证获取的 IP</h3>
<p>找到目标的真实 以后，如何验证其真实性呢？如果是Web ，最简单的验证方法是直接尝试用IP访问，看看响应的页面是不是和访问域名返回的一样；或者在目标段比较大的情况下，借助类似Masscan 的工具批扫描对应IP 段中所有开了 80 443 8080端口的 ，然后逐个尝试IP访问，观察响应结果是否为目标站点。</p>
<h2 id="收集敏感目录文件">收集敏感目录文件</h2>
<p>获取网站的后台管理页面、文件上传界面 甚至可能扫描出网站的源代码。</p>
<p>针对网站目录的扫描主要有<code>DirBuster</code> 、御剑后台扫描珍藏版、 wwwscan、Spinder.py 轻量级快速单文件目录后台扫描〉、 Sensitivefilescan （轻量级快速单文件目录后台扫描）、 Weakfilescan （轻量级快速单文件目录后台扫描）等工具。</p>
<p>DirBuster是 OWASP开发的一款基 Java编写的、专门用于探视］Web服务器的目录和隐藏文件。界面是纯图形化的，用法相对简单。</p>
<p>除此之外，还可以利用很多在线工具站，效果也相当不错，这里推荐一个：WebScan (<a href="http://www.webscan.cc/" target="_blank" rel="noopener noreffer ">http://www.webscan.cc/</a>）</p>
<h2 id="社会工程学">社会工程学</h2>
<p>社工库</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-10-02</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" data-title="web安全攻防-第一章-渗透测试之信息收集" data-hashtags="web安全攻防"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" data-hashtag="web安全攻防"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" data-title="web安全攻防-第一章-渗透测试之信息收集"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" data-title="web安全攻防-第一章-渗透测试之信息收集"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://oublie6.github.io/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" data-title="web安全攻防-第一章-渗透测试之信息收集"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/">web安全攻防</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/python/anaconda3/anaconda3%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="prev" rel="prev" title="Anaconda3-常用命令"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Anaconda3-常用命令</a>
            <a href="/posts/web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2/%E7%AC%AC%E4%BA%8C%E7%AB%A0/%E6%90%AD%E5%BB%BA%E6%BC%8F%E6%B4%9E%E7%8E%AF%E5%A2%83%E5%8F%8A%E5%AE%9E%E6%88%98/" class="next" rel="next" title="web安全攻防-第二章-搭建漏洞环境及实战">web安全攻防-第二章-搭建漏洞环境及实战<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.102.3">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://oublie6.github.io/" target="_blank">oublie</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"gitalk":{"admin":["oublie6"],"clientID":"161f711b5310ee2521fa","clientSecret":"0bbbc4a0ed58220489334176a48a3c0898c1538a","id":"2022-10-02T15:06:06+08:00","owner":"oublie6","repo":"oublie6.github.io","title":"web安全攻防-第一章-渗透测试之信息收集"}},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
