<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Python-第三方库-mininet-Mininet简介 - Oublie的Hugo博客</title><meta name="Description" content="Oublie的Hugo博客,hugo,golang,mysql,微服务"><meta property="og:title" content="Python-第三方库-mininet-Mininet简介" />
<meta property="og:description" content="mininet官网 mininet官网文档 mininet官网api mininet简介 github 什么是迷你网？ Mininet 是一个网络仿真器，或者更准确地说是一个 网" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" /><meta property="og:image" content="https://oublie6.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-29T11:18:06+08:00" />
<meta property="article:modified_time" content="2022-11-29T11:18:06+08:00" /><meta property="og:site_name" content="我的网站" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://oublie6.github.io/logo.png"/>

<meta name="twitter:title" content="Python-第三方库-mininet-Mininet简介"/>
<meta name="twitter:description" content="mininet官网 mininet官网文档 mininet官网api mininet简介 github 什么是迷你网？ Mininet 是一个网络仿真器，或者更准确地说是一个 网"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/%e5%a4%b4%e5%83%8f.jpeg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" /><link rel="prev" href="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E6%BC%94%E7%BB%83/" /><link rel="next" href="https://oublie6.github.io/posts/p4/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Python-第三方库-mininet-Mininet简介",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/oublie6.github.io\/posts\/python\/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93\/mininet\/mininet%E7%AE%80%E4%BB%8B\/"
        },"image": ["https:\/\/oublie6.github.io\/images\/%E5%A4%B4%E5%83%8F.jpeg"],"genre": "posts","keywords": "mininet, Python第三方库","wordcount":  8352 ,
        "url": "https:\/\/oublie6.github.io\/posts\/python\/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93\/mininet\/mininet%E7%AE%80%E4%BB%8B\/","datePublished": "2022-11-29T11:18:06+08:00","dateModified": "2022-11-29T11:18:06+08:00","publisher": {
            "@type": "Organization",
            "name": "Oublie的Hugo博客","logo": "https:\/\/oublie6.github.io\/images\/%E5%A4%B4%E5%83%8F.jpeg"},"author": {
                "@type": "Person",
                "name": "oublie"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Oublie的Hugo博客">Oublie的Hugo博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="/love.html"> 一封情书 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Oublie的Hugo博客">Oublie的Hugo博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="/love.html" title="">一封情书</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Python-第三方库-mininet-Mininet简介</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://oublie6.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>oublie</a></span>&nbsp;<span class="post-category">included in <a href="/categories/python/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Python</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-11-29">2022-11-29</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;8352 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;17 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#什么是迷你网">什么是迷你网？</a></li>
    <li><a href="#为什么-mininet-很酷">为什么 Mininet 很酷？</a></li>
    <li><a href="#mininet-的局限性是什么">Mininet 的局限性是什么？</a></li>
    <li><a href="#使用-mininet">使用 Mininet</a>
      <ul>
        <li><a href="#创建拓扑">创建拓扑</a></li>
        <li><a href="#注意mininet和构造函数">注意：Mininet()和构造函数</a></li>
        <li><a href="#脚本输出">脚本输出</a></li>
        <li><a href="#设置性能参数">设置性能参数</a></li>
        <li><a href="#在主机中运行程序">在主机中运行程序</a></li>
        <li><a href="#新popenpexec界面">新：popen()/pexec()界面</a></li>
        <li><a href="#重要共享文件系统">重要：共享文件系统！</a></li>
        <li><a href="#主机配置方法">主机配置方法</a></li>
        <li><a href="#在-mininet-中命名">在 Mininet 中命名</a></li>
        <li><a href="#命令行界面">命令行界面</a></li>
        <li><a href="#mn使用--custom文件自定义">mn使用&ndash;custom文件自定义</a></li>
        <li><a href="#其他示例">其他示例</a></li>
        <li><a href="#了解-mininet-api">了解 Mininet API</a>
          <ul>
            <li><a href="#低级-api节点和链接">低级 API：节点和链接</a></li>
            <li><a href="#中级-api网络对象">中级 API：网络对象</a></li>
            <li><a href="#高级-api拓扑模板">高级 API：拓扑模板</a></li>
            <li><a href="#mininet-api-文档">Mininet API 文档</a></li>
            <li><a href="#测试性能">测试性能</a></li>
          </ul>
        </li>
        <li><a href="#openflow-和自定义路由">OpenFlow 和自定义路由</a>
          <ul>
            <li><a href="#openflow控制器">OpenFlow控制器</a></li>
            <li><a href="#外部-openflow-控制器">外部 OpenFlow 控制器</a></li>
            <li><a href="#通过传入控制器对象调用-api">通过传入控制器对象调用 API</a></li>
            <li><a href="#多路径路由">多路径路由</a></li>
          </ul>
        </li>
        <li><a href="#更新-mininet">更新 Mininet</a></li>
        <li><a href="#学习python">学习Python</a></li>
        <li><a href="#它是如何工作的">它是如何工作的</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><a href="http://mininet.org/" target="_blank" rel="noopener noreffer ">mininet官网</a></p>
<p><a href="https://github.com/mininet/mininet/wiki/Documentation" target="_blank" rel="noopener noreffer ">mininet官网文档</a></p>
<p><a href="https://mininet.org/api/annotated.html" target="_blank" rel="noopener noreffer ">mininet官网api</a></p>
<p><a href="https://github.com/mininet/mininet/wiki/Introduction-to-Mininet" target="_blank" rel="noopener noreffer ">mininet简介 github</a></p>
<h2 id="什么是迷你网">什么是迷你网？</h2>
<p>Mininet 是一个网络仿真器，或者更准确地说是一个 网络仿真编排系统。</p>
<h2 id="为什么-mininet-很酷">为什么 Mininet 很酷？</h2>
<ol>
<li>它很快——启动一个简单的网络只需几秒钟。</li>
<li>可以创建自定义拓扑：单个交换机、更大的类似 Internet 的拓扑、斯坦福骨干网、数据中心或其他任何东西。</li>
<li>可以运行真正的程序：任何在 Linux 上运行的程序都可以运行，从 Web 服务器到 TCP 窗口监控工具再到 Wireshark。</li>
<li>可以自定义数据包转发：Mininet 的交换机可以使用 OpenFlow 协议进行编程。在 Mininet 中运行的自定义软件定义网络设计可以轻松转移到硬件 OpenFlow 交换机以进行线速数据包转发。</li>
<li>可以在笔记本电脑、服务器、虚拟机、本地 Linux 机器（Ubuntu 12.10+ 中包含 Mininet！）或云（例如 Amazon EC2）上运行 Mininet。</li>
<li>可以共享代码和复现结果。</li>
<li>可以通过编写简单（或必要时复杂）Python 脚本来创建和运行 Mininet 实验。</li>
</ol>
<h2 id="mininet-的局限性是什么">Mininet 的局限性是什么？</h2>
<p>尽管我们认为 Mininet 很棒，但它确实有一些局限性。例如，</p>
<ul>
<li>在单个系统上运行很方便，但它施加了资源限制： CPU 和 带宽 将需要在您的虚拟主机和交换机之间进行平衡和共享。</li>
<li>Mininet 为所有虚拟主机使用单个 Linux 内核；不能运行依赖于 BSD、Windows 或其他操作系统内核的软件。</li>
<li>Mininet 不会为您编写 OpenFlow 控制器；如果您需要自定义路由器或交换机行为，则需要查找或开发具有所需功能的控制器。</li>
<li>默认情况下，Mininet 网络与您的 LAN 和 Internet 隔离。可以使用 NAT对象和/或&ndash;nat选项通过网络地址转换将 Mininet 网络连接到 LAN。可以将真实（或虚拟）硬件接口附加到您的 Mininet 网络。</li>
<li>默认情况下，所有 Mininet 主机共享主机文件系统和 PID 空间；如果正在运行需要在 /etc 中配置的守护进程，必须小心不要错误地杀死错误的进程。</li>
<li>与模拟器不同，Mininet 没有强烈的虚拟时间概念；时序测量将基于实时，并且无法轻易模拟比实时更快的结果（例如 100 Gbps 网络）。</li>
</ul>
<p>关于性能的旁白：对于网络受限的实验，您必须牢记的主要事情是您可能需要使用较慢的链接，例如 10 或 100 Mb/秒而不是 10 Gb/秒，因为数据包由一组共享 CPU 和内存资源的软件交换机（例如 Open vSwitch）转发，通常性能低于专用交换硬件。对于 CPU 限制的实验，您还需要确保仔细限制 Mininet 主机的 CPU 带宽。如果您主要关心功能的正确性，则可以在没有特定带宽限制的情况下运行 Mininet - 这是运行 Mininet 的快速简便的方法，并且它还以牺牲负载下的计时精度为代价提供最高的性能。</p>
<h2 id="使用-mininet">使用 Mininet</h2>
<h3 id="创建拓扑">创建拓扑</h3>
<p>Mininet 支持参数化拓扑，根据您传递给它的参数进行配置，并可重复用于多个实验。</p>
<p>例如，这是一个简单的网络拓扑（基于mininet/topo.py:SingleSwitchTopo），它由连接到单个交换机（s1）的指定数量的主机（h1通过hN）组成。</p>
<p>请注意，这是 Mininet 2.2 中引入的推荐（简化）拓扑语法：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#aaa;font-style:italic">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.topo</span> <span style="color:#00a">import</span> Topo
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.net</span> <span style="color:#00a">import</span> Mininet
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.util</span> <span style="color:#00a">import</span> dumpNodeConnections
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.log</span> <span style="color:#00a">import</span> setLogLevel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">SingleSwitchTopo</span>(Topo):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Single switch connected to n hosts.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">build</span>(self, n=<span style="color:#099">2</span>):
</span></span><span style="display:flex;"><span>        switch = self.addSwitch(<span style="color:#a50">&#39;s1&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#aaa;font-style:italic"># Python&#39;s range(N) generates 0..N-1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a">for</span> h <span style="color:#00a">in</span> <span style="color:#0aa">range</span>(n):
</span></span><span style="display:flex;"><span>            host = self.addHost(<span style="color:#a50">&#39;h</span><span style="color:#a50">%s</span><span style="color:#a50">&#39;</span> % (h + <span style="color:#099">1</span>))
</span></span><span style="display:flex;"><span>            self.addLink(host, switch)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">def</span> <span style="color:#0a0">simpleTest</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Create and test a simple network&#34;</span>
</span></span><span style="display:flex;"><span>    topo = SingleSwitchTopo(n=<span style="color:#099">4</span>)
</span></span><span style="display:flex;"><span>    net = Mininet(topo)
</span></span><span style="display:flex;"><span>    net.start()
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Dumping host connections&#34;</span> )
</span></span><span style="display:flex;"><span>    dumpNodeConnections(net.hosts)
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Testing network connectivity&#34;</span> )
</span></span><span style="display:flex;"><span>    net.pingAll()
</span></span><span style="display:flex;"><span>    net.stop()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">if</span> __name__ == <span style="color:#a50">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#aaa;font-style:italic"># Tell mininet to print useful information</span>
</span></span><span style="display:flex;"><span>    setLogLevel(<span style="color:#a50">&#39;info&#39;</span>)
</span></span><span style="display:flex;"><span>    simpleTest()
</span></span></code></pre></td></tr></table>
</div>
</div><p>上述代码中重要的类、方法、函数和变量包括：</p>
<ul>
<li>Topo: Mininet 拓扑的基类</li>
<li>build(): 在拓扑类中重写的方法。构造函数参数 (n) 将由Topo.<strong>init</strong>()自动传递给它。此方法创建一个模板（基本上是一个节点名称图和一个配置信息数据库），然后使用它来创建Mininet实际拓扑。</li>
<li>addSwitch(): 添加一个交换机到拓扑并返回交换机名称</li>
<li>addHost(): 将主机添加到拓扑并返回主机名</li>
<li>addLink()：添加双向链接到拓扑（并返回链接键，但这并不重要）。除非另有说明，否则 Mininet 中的链接是双向的。</li>
<li>Mininet: 创建和管理网络的主类</li>
<li>start(): 启动你的网络</li>
<li>pingAll()：通过尝试让所有节点相互 ping 来测试连通性</li>
<li>stop(): 停止你的网络</li>
<li>net.hosts：网络中的所有主机</li>
<li>dumpNodeConnections()：dumps（打印） connections to/from a set of nodes.</li>
<li>setLogLevel( &lsquo;info&rsquo; | &lsquo;debug&rsquo; | &lsquo;output&rsquo; ): 设置 Mininet 的默认输出电平；建议使用“info”，因为它提供了有用的信息。</li>
</ul>
<p>可以在mininet/examples中找到其他示例代码。</p>
<h3 id="注意mininet和构造函数">注意：Mininet()和构造函数</h3>
<p>Mininet()是创建并返回网络对象的构造函数。Mininet它需要一些配置参数，特别是：</p>
<ul>
<li>topo：拓扑对象（不是构造函数或模板 - 实际对象！）</li>
<li>host：用于在拓扑中创建Host元素的构造函数</li>
<li>switch：用于在拓扑中创建Switch元素的构造函数</li>
<li>controller：用于在拓扑中创建Controller元素的构造函数</li>
<li>link: 用于在拓扑中创建 Link s 的构造函数</li>
</ul>
<p>构造函数可以使用functools.partial生成：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">functools</span> <span style="color:#00a">import</span> partial
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>net = Mininet( topo=SingleSwitchTopo(), link=partial(TCLink,delay=<span style="color:#a50">&#39;30ms&#39;</span>, bw=<span style="color:#099">100</span>) ... )
</span></span></code></pre></td></tr></table>
</div>
</div><p>您还可以创建自己的构造函数或子类。请记住，为拓扑中的每个网络元素调用构造函数。</p>
<p>Mininet 允许传入一个controller 对象或对象列表。</p>
<h3 id="脚本输出">脚本输出</h3>
<p>运行此脚本应该会产生类似于以下内容的结果：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ sudo python simpletest.py
</span></span><span style="display:flex;"><span>*** Creating network
</span></span><span style="display:flex;"><span>*** Adding controller
</span></span><span style="display:flex;"><span>*** Adding hosts:
</span></span><span style="display:flex;"><span>h1 h2 h3 h4 
</span></span><span style="display:flex;"><span>*** Adding switches:
</span></span><span style="display:flex;"><span>s1 
</span></span><span style="display:flex;"><span>*** Adding links:
</span></span><span style="display:flex;"><span>(h1, s1) (h2, s1) (h3, s1) (h4, s1) 
</span></span><span style="display:flex;"><span>*** Configuring hosts
</span></span><span style="display:flex;"><span>h1 h2 h3 h4 
</span></span><span style="display:flex;"><span>*** Starting controller
</span></span><span style="display:flex;"><span>c0 
</span></span><span style="display:flex;"><span>*** Starting <span style="color:#099">1</span> switches
</span></span><span style="display:flex;"><span>s1 ...
</span></span><span style="display:flex;"><span>Dumping host connections
</span></span><span style="display:flex;"><span>h1 h1-eth0:s1-eth1
</span></span><span style="display:flex;"><span>h2 h2-eth0:s1-eth2
</span></span><span style="display:flex;"><span>h3 h3-eth0:s1-eth3
</span></span><span style="display:flex;"><span>h4 h4-eth0:s1-eth4
</span></span><span style="display:flex;"><span>Testing network connectivity
</span></span><span style="display:flex;"><span>*** Ping: testing ping reachability
</span></span><span style="display:flex;"><span>h1 -&gt; h2 h3 h4 
</span></span><span style="display:flex;"><span>h2 -&gt; h1 h3 h4 
</span></span><span style="display:flex;"><span>h3 -&gt; h1 h2 h4 
</span></span><span style="display:flex;"><span>h4 -&gt; h1 h2 h3 
</span></span><span style="display:flex;"><span>*** Results: 0% dropped (12/12 received)
</span></span><span style="display:flex;"><span>*** Stopping <span style="color:#099">1</span> controllers
</span></span><span style="display:flex;"><span>c0 
</span></span><span style="display:flex;"><span>*** Stopping <span style="color:#099">4</span> links
</span></span><span style="display:flex;"><span>....
</span></span><span style="display:flex;"><span>*** Stopping <span style="color:#099">1</span> switches
</span></span><span style="display:flex;"><span>s1 
</span></span><span style="display:flex;"><span>*** Stopping <span style="color:#099">4</span> hosts
</span></span><span style="display:flex;"><span>h1 h2 h3 h4 
</span></span><span style="display:flex;"><span>*** Done
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置性能参数">设置性能参数</h3>
<p>除了基本的行为网络之外，Mininet 还通过CPULimitedHost和TCLink 类提供性能限制和隔离功能。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#aaa;font-style:italic">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.topo</span> <span style="color:#00a">import</span> Topo
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.net</span> <span style="color:#00a">import</span> Mininet
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.node</span> <span style="color:#00a">import</span> CPULimitedHost
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.link</span> <span style="color:#00a">import</span> TCLink
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.util</span> <span style="color:#00a">import</span> dumpNodeConnections
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.log</span> <span style="color:#00a">import</span> setLogLevel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">SingleSwitchTopo</span>( Topo ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Single switch connected to n hosts.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">build</span>( self, n=<span style="color:#099">2</span> ):
</span></span><span style="display:flex;"><span>	switch = self.addSwitch( <span style="color:#a50">&#39;s1&#39;</span> )
</span></span><span style="display:flex;"><span>	<span style="color:#00a">for</span> h <span style="color:#00a">in</span> <span style="color:#0aa">range</span>(n):
</span></span><span style="display:flex;"><span>	    <span style="color:#aaa;font-style:italic"># Each host gets 50%/n of system CPU</span>
</span></span><span style="display:flex;"><span>	    host = self.addHost( <span style="color:#a50">&#39;h</span><span style="color:#a50">%s</span><span style="color:#a50">&#39;</span> % (h + <span style="color:#099">1</span>),
</span></span><span style="display:flex;"><span>		                 cpu=<span style="color:#099">.5</span>/n )
</span></span><span style="display:flex;"><span>	    <span style="color:#aaa;font-style:italic"># 10 Mbps, 5ms delay, 2% loss, 1000 packet queue</span>
</span></span><span style="display:flex;"><span>	    self.addLink( host, switch, bw=<span style="color:#099">10</span>, delay=<span style="color:#a50">&#39;5ms&#39;</span>, loss=<span style="color:#099">2</span>,
</span></span><span style="display:flex;"><span>                          max_queue_size=<span style="color:#099">1000</span>, use_htb=<span style="color:#00a">True</span> )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">def</span> <span style="color:#0a0">perfTest</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Create network and run simple performance test&#34;</span>
</span></span><span style="display:flex;"><span>    topo = SingleSwitchTopo( n=<span style="color:#099">4</span> )
</span></span><span style="display:flex;"><span>    net = Mininet( topo=topo,
</span></span><span style="display:flex;"><span>	           host=CPULimitedHost, link=TCLink )
</span></span><span style="display:flex;"><span>    net.start()
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Dumping host connections&#34;</span> )
</span></span><span style="display:flex;"><span>    dumpNodeConnections( net.hosts )
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Testing network connectivity&#34;</span> )
</span></span><span style="display:flex;"><span>    net.pingAll()
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Testing bandwidth between h1 and h4&#34;</span> )
</span></span><span style="display:flex;"><span>    h1, h4 = net.get( <span style="color:#a50">&#39;h1&#39;</span>, <span style="color:#a50">&#39;h4&#39;</span> )
</span></span><span style="display:flex;"><span>    net.iperf( (h1, h4) )
</span></span><span style="display:flex;"><span>    net.stop()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">if</span> __name__ == <span style="color:#a50">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    setLogLevel( <span style="color:#a50">&#39;info&#39;</span> )
</span></span><span style="display:flex;"><span>    perfTest()
</span></span></code></pre></td></tr></table>
</div>
</div><p>重要方法和参数：</p>
<p>self.addHost(name, cpu=f):这允许您指定将分配给虚拟主机的整个系统 CPU 资源的一部分。</p>
<p>self.addLink( node1, node2, bw=10, delay=&lsquo;5ms&rsquo;, max_queue_size=1000, loss=10, use_htb=True)：添加具有带宽、延迟和丢失特性的双向链接，使用分层令牌桶速率限制器和 netem 延迟/丢失模拟器，队列最大为 1000 个数据包。bw参数是Mbit为单位的数字表示；delay表示为带有单位的字符串（例如“5ms”、“100us”、“1s”）；loss以百分比表示（介于 0 和 100 之间）；max_queue_size以数据包表示。</p>
<p>使用 Python 字典来复用相同的参数，例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>linkopts = <span style="color:#0aa">dict</span>(bw=<span style="color:#099">10</span>, delay=<span style="color:#a50">&#39;5ms&#39;</span>, loss=<span style="color:#099">10</span>, max_queue_size=<span style="color:#099">1000</span>, use_htb=<span style="color:#00a">True</span>)
</span></span><span style="display:flex;"><span><span style="color:#aaa;font-style:italic"># (or you can use brace syntax: linkopts = {&#39;bw&#39;:10, &#39;delay&#39;:&#39;5ms&#39;, ... } )</span>
</span></span><span style="display:flex;"><span>self.addLink(node1, node2, **linkopts)
</span></span></code></pre></td></tr></table>
</div>
</div><p>net.get()：按名称检索节点（主机或交换机）对象。可以通过节点对象向主机发送命令（例如使用 host.cmd()）并获取其输出。</p>
<p>另外，可以简单地使用中括号（例如net[&lsquo;h1&rsquo;]）按名称检索给定的节点。</p>
<h3 id="在主机中运行程序">在主机中运行程序</h3>
<p>cmd()方法在主机中运行命令并获取输出。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h1 = net.get(<span style="color:#a50">&#39;h1&#39;</span>)	
</span></span><span style="display:flex;"><span>result = h1.cmd(<span style="color:#a50">&#39;ifconfig&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( result )
</span></span></code></pre></td></tr></table>
</div>
</div><p>在后台运行命令一段时间，然后停止该命令，并将其输出保存到一个文件中：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">time</span> <span style="color:#00a">import</span> sleep
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Starting test...&#34;</span> )
</span></span><span style="display:flex;"><span>h1.cmd(<span style="color:#a50">&#39;while true; do date; sleep 1; done &gt; /tmp/date.out &amp;&#39;</span>)
</span></span><span style="display:flex;"><span>sleep(<span style="color:#099">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Stopping test&#34;</span> )
</span></span><span style="display:flex;"><span>h1.cmd(<span style="color:#a50">&#39;kill %while&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Reading output&#34;</span> )
</span></span><span style="display:flex;"><span>f = <span style="color:#0aa">open</span>(<span style="color:#a50">&#39;/tmp/date.out&#39;</span>)
</span></span><span style="display:flex;"><span>lineno = <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span><span style="color:#00a">for</span> line <span style="color:#00a">in</span> f.readlines():
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;</span><span style="color:#a50">%d</span><span style="color:#a50">: </span><span style="color:#a50">%s</span><span style="color:#a50">&#34;</span> % ( lineno, line.strip() ) )
</span></span><span style="display:flex;"><span>    lineno += <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>f.close()
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用 shell 的输出重定向功能将输出发送到/tmp/date.out，使用 shell 的后台执行功能在后台&amp;运行命令，并使用作业控制kill %while关闭在后台运行的程序。后台运行的作业不能保证在 Mininet 退出时停止（无论是有意还是由于错误）。定期使用 ps 命令来确保没有僵尸作业。</p>
<p>拥有一个 shell 进程可以让您轻松执行其他任务。例如，可以使用以下命令找出后台命令的 PID</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>pid = <span style="color:#0aa">int</span>( h1.cmd(<span style="color:#a50">&#39;echo $!&#39;</span>) )
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后你可以使用 wait 等待特定进程完成执行，例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h1.cmd(<span style="color:#a50">&#39;wait&#39;</span>, pid)
</span></span></code></pre></td></tr></table>
</div>
</div><p>这仅适用于 UNIX 命令，不适用于内置于 bash shell 本身（并且没有单独的 pid！）的命令（例如while，cd）。</p>
<p>这些命令中的每一个都在前台执行（没有&amp;）而不是后台 (&amp;)，因为要在python中获得输出。</p>
<p>除了使用 shell 的等待机制之外，Mininet 本身还允许使用以下命令启动前台命令sendCmd()，然后等待它在稍后的某个时间完成waitOutput()：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts:
</span></span><span style="display:flex;"><span>    h.sendCmd(<span style="color:#a50">&#39;sleep 20&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#f00;background-color:#faa">…</span>
</span></span><span style="display:flex;"><span>results = {}
</span></span><span style="display:flex;"><span><span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts:
</span></span><span style="display:flex;"><span>    results[h.name] = h.waitOutput()
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果将输出发送到文件，可能希望在测试运行时以交互方式监视该文件的内容。 examples/multipoll.py 示例提供了一个monitorFiles()函数，实现了一种可能的机制来监视多个输出文件。这简化了交互式监视来自多个主机的输出的测试的实现：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">def</span> <span style="color:#0a0">monitorTest</span>( N=<span style="color:#099">3</span>, seconds=<span style="color:#099">3</span> ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Run pings and monitor multiple hosts&#34;</span>
</span></span><span style="display:flex;"><span>    topo = SingleSwitchTopo( N )
</span></span><span style="display:flex;"><span>    net = Mininet( topo )
</span></span><span style="display:flex;"><span>    net.start()
</span></span><span style="display:flex;"><span>    hosts = net.hosts
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Starting test...&#34;</span> )
</span></span><span style="display:flex;"><span>    server = hosts[ <span style="color:#099">0</span> ]
</span></span><span style="display:flex;"><span>    outfiles, errfiles = {}, {}
</span></span><span style="display:flex;"><span>    <span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts:
</span></span><span style="display:flex;"><span>        <span style="color:#aaa;font-style:italic"># Create and/or erase output files</span>
</span></span><span style="display:flex;"><span>        outfiles[ h ] = <span style="color:#a50">&#39;/tmp/</span><span style="color:#a50">%s</span><span style="color:#a50">.out&#39;</span> % h.name
</span></span><span style="display:flex;"><span>        errfiles[ h ] = <span style="color:#a50">&#39;/tmp/</span><span style="color:#a50">%s</span><span style="color:#a50">.err&#39;</span> % h.name
</span></span><span style="display:flex;"><span>        h.cmd( <span style="color:#a50">&#39;echo &gt;&#39;</span>, outfiles[ h ] )
</span></span><span style="display:flex;"><span>        h.cmd( <span style="color:#a50">&#39;echo &gt;&#39;</span>, errfiles[ h ] )
</span></span><span style="display:flex;"><span>        <span style="color:#aaa;font-style:italic"># Start pings</span>
</span></span><span style="display:flex;"><span>        h.cmdPrint(<span style="color:#a50">&#39;ping&#39;</span>, server.IP(),
</span></span><span style="display:flex;"><span>                   <span style="color:#a50">&#39;&gt;&#39;</span>, outfiles[ h ],
</span></span><span style="display:flex;"><span>                   <span style="color:#a50">&#39;2&gt;&#39;</span>, errfiles[ h ],
</span></span><span style="display:flex;"><span>                   <span style="color:#a50">&#39;&amp;&#39;</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Monitoring output for&#34;</span>, seconds, <span style="color:#a50">&#34;seconds&#34;</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#00a">for</span> h, line <span style="color:#00a">in</span> monitorFiles( outfiles, seconds, timeoutms=<span style="color:#099">500</span> ):
</span></span><span style="display:flex;"><span>        <span style="color:#00a">if</span> h:
</span></span><span style="display:flex;"><span>            <span style="color:#0aa">print</span>( <span style="color:#a50">&#39;</span><span style="color:#a50">%s</span><span style="color:#a50">: </span><span style="color:#a50">%s</span><span style="color:#a50">&#39;</span> % ( h.name, line ) )
</span></span><span style="display:flex;"><span>    <span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts:
</span></span><span style="display:flex;"><span>        h.cmd(<span style="color:#a50">&#39;kill %ping&#39;</span>)
</span></span><span style="display:flex;"><span>    net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><p>这相当于通过monitorFiles监听outfiles列表中的文件，然后统一输出到bash中</p>
<h3 id="新popenpexec界面">新：popen()/pexec()界面</h3>
<p>除了cmd()/sendCmd()的基于 shell 的机制之外，Mininet 现在还支持返回标准 Python Popen()对象的基于管道的接口（有关详细信息，请参阅 Python 的 subprocess 模块。）该机制较新且没有经过充分测试cmd()，但您可能会发现在后台运行多个进程并监视它们的输出很方便。提供了一个pmonitor()函数，Popen()可以更轻松地监视多个对象。</p>
<p>examples/popenpoll.py中的代码使用popen()接口和pmonitor()辅助函数实现与上述类似的功能：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">def</span> <span style="color:#0a0">pmonitorTest</span>( N=<span style="color:#099">3</span>, seconds=<span style="color:#099">10</span> ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Run pings and monitor multiple hosts using pmonitor&#34;</span>
</span></span><span style="display:flex;"><span>    topo = SingleSwitchTopo( N )
</span></span><span style="display:flex;"><span>    net = Mininet( topo )
</span></span><span style="display:flex;"><span>    net.start()
</span></span><span style="display:flex;"><span>    hosts = net.hosts
</span></span><span style="display:flex;"><span>    <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Starting test...&#34;</span> )
</span></span><span style="display:flex;"><span>    server = hosts[ <span style="color:#099">0</span> ]
</span></span><span style="display:flex;"><span>    popens = {}
</span></span><span style="display:flex;"><span>    <span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts:
</span></span><span style="display:flex;"><span>        popens[ h ] = h.popen(<span style="color:#a50">&#39;ping&#39;</span>, server.IP() )
</span></span><span style="display:flex;"><span>        <span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Monitoring output for&#34;</span>, seconds, <span style="color:#a50">&#34;seconds&#34;</span> )
</span></span><span style="display:flex;"><span>        endTime = time() + seconds
</span></span><span style="display:flex;"><span>        <span style="color:#00a">for</span> h, line <span style="color:#00a">in</span> pmonitor( popens, timeoutms=<span style="color:#099">500</span> ):
</span></span><span style="display:flex;"><span>            <span style="color:#00a">if</span> h:
</span></span><span style="display:flex;"><span>                <span style="color:#0aa">print</span>( <span style="color:#a50">&#39;</span><span style="color:#a50">%s</span><span style="color:#a50">: </span><span style="color:#a50">%s</span><span style="color:#a50">&#39;</span> % ( h.name, line ), )
</span></span><span style="display:flex;"><span>                <span style="color:#00a">if</span> time() &gt;= endTime:
</span></span><span style="display:flex;"><span>                    <span style="color:#00a">for</span> p <span style="color:#00a">in</span> popens.values():
</span></span><span style="display:flex;"><span>                        p.send_signal( SIGINT )
</span></span><span style="display:flex;"><span>        net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><p>请注意，此实现略有不同，因为它将时间管理从pmonitor()辅助函数中提取出来，但这使得ping能够在它被中断后捕获它的输出。</p>
<p>当然，您不必使用pmonitor()- 您可以使用 Popen.communicate()（只要您没有太多文件描述符）或select.poll()以及任何其他有效的机制。</p>
<h3 id="重要共享文件系统">重要：共享文件系统！</h3>
<p>要记住的一件事是，默认情况下 Mininet 主机共享底层服务器的根文件系统。</p>
<p>共享根文件系统还意味着不需要在 Mininet 主机之间复制数据，因为可以直接访问。</p>
<p>然而，一个副作用是主机共享 Mininet 服务器的 /etc目录。、如果您需要对程序进行特定配置（例如httpd），那么您可能需要为每个 Mininet 主机创建不同的配置文件，并将它们指定为您正在运行的程序的启动选项。</p>
<p>另一个副作用是，尝试在多个主机上的同一目录中创建同一文件，会发生文件冲突。</p>
<p>如果需要每个主机的私有目录，将它们指定为Host的选项，例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h = Host( <span style="color:#a50">&#39;h1&#39;</span>, privateDirs=[ <span style="color:#a50">&#39;/some/directory&#39;</span> ] )
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="主机配置方法">主机配置方法</h3>
<p>Mininet hosts 提供了一些方便的网络配置方法：</p>
<ol>
<li>IP(): 返回主机或特定接口的 IP 地址。</li>
<li>MAC()：返回主机或特定接口的 MAC 地址。</li>
<li>setARP(): 将静态 ARP 条目添加到主机的 ARP 缓存中。</li>
<li>setIP()：设置主机或特定接口的 IP 地址。</li>
<li>setMAC()：设置主机或特定接口的MAC地址</li>
</ol>
<p>例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#0aa">print</span>( <span style="color:#a50">&#34;Host&#34;</span>, h1.name, <span style="color:#a50">&#34;has IP address&#34;</span>, h1.IP(), <span style="color:#a50">&#34;and MAC address&#34;</span>, h1.MAC() )
</span></span></code></pre></td></tr></table>
</div>
</div><p>在任何情况下，如果您不提供特定接口（例如h1-eth0 或接口对象），该方法将使用主机的默认接口。</p>
<h3 id="在-mininet-中命名">在 Mininet 中命名</h3>
<p>主机被称为h1..hN，交换机被称为s1..sN。属于节点的接口以节点名称开头命名，例如h1-eth0是主机h1的默认接口，s1-eth1是交换机s1的第一个数据端口。主机接口仅在主机内部可见，交换机数据端口在“root”命名空间中可见。因此，很容易检查交换机接口，但检查主机接口有点棘手（主要使用host.cmd())。</p>
<h3 id="命令行界面">命令行界面</h3>
<p>Mininet 包括一个可以在网络上调用的命令行界面 (CLI)，并提供各种有用的命令，以及显示 xterm 窗口和在网络中的各个节点上运行命令的能力。可以通过将网络对象传递给CLI()构造函数来在网络上调用 CLI：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.topo</span> <span style="color:#00a">import</span> SingleSwitchTopo
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.net</span> <span style="color:#00a">import</span> Mininet
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.cli</span> <span style="color:#00a">import</span> CLI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>net = Mininet(SingleSwitchTopo(<span style="color:#099">2</span>))
</span></span><span style="display:flex;"><span>net.start()
</span></span><span style="display:flex;"><span>CLI(net)
</span></span><span style="display:flex;"><span>net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><p>启动 CLI 可用于调试网络，因为它允许您查看网络拓扑（使用net命令）、测试连接性（使用pingall命令）以及向各个主机发送命令。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>*** Starting CLI:
</span></span><span style="display:flex;"><span>mininet&gt; net
</span></span><span style="display:flex;"><span>c0
</span></span><span style="display:flex;"><span>s1 lo:  s1-eth1:h1-eth0 s1-eth2:h2-eth0
</span></span><span style="display:flex;"><span>h1 h1-eth0:s1-eth1
</span></span><span style="display:flex;"><span>h2 h2-eth0:s1-eth2
</span></span><span style="display:flex;"><span>mininet&gt; pingall
</span></span><span style="display:flex;"><span>*** Ping: testing ping reachability
</span></span><span style="display:flex;"><span>h1 -&gt; h2
</span></span><span style="display:flex;"><span>h2 -&gt; h1
</span></span><span style="display:flex;"><span>*** Results: 0% dropped (0/2 lost)
</span></span><span style="display:flex;"><span>mininet&gt; h1 ip link show
</span></span><span style="display:flex;"><span>746: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style="color:#099">16436</span> qdisc noqueue state UNKNOWN
</span></span><span style="display:flex;"><span>	link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span style="display:flex;"><span>749: h1-eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#099">1500</span> qdisc pfifo_fast state UP qlen <span style="color:#099">1000</span>
</span></span><span style="display:flex;"><span>	link/ether d6:13:2d:6f:98:95 brd ff:ff:ff:ff:ff:ff
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mn使用--custom文件自定义">mn使用&ndash;custom文件自定义</h3>
<p>建议直接写python文件，详见<a href="https://github.com/mininet/mininet/wiki/Introduction-to-Mininet#custom" target="_blank" rel="noopener noreffer ">官网</a></p>
<h3 id="其他示例">其他示例</h3>
<p>Mininet 脚本的其他示例可以在mininet/examples.</p>
<p>这些示例旨在提供教育意义，因为它们展示了可以使用 Mininet API 的不同方式。我们鼓励您尝试阅读Python 代码并自己运行示例。如果它们由于某种原因不起作用，看看您是否能找出原因！</p>
<p>consoles.py可以构建的有趣演示。</p>
<p>miniedit.py 对于 Mininet 的简单实验来说是一个特别有用的 GUI。</p>
<h3 id="了解-mininet-api">了解 Mininet API</h3>
<p>Mininet 的 API 构建在三个主要级别：</p>
<ul>
<li>低级 API：低级 API 由基本节点和链接类（例如Host、Switch和Link及其子类）组成，它们实际上可以单独实例化并用于创建网络，但有点笨拙。</li>
<li>中级API：中级API 添加Mininet对象作为节点和链接的容器。它提供了多种方法（例如addHost()、addSwitch()和addLink()）用于向网络添加节点和链接，以及网络配置、启动和关闭（特别是start()和stop()。）</li>
<li>高级 API：高级 API 添加拓扑模板抽象Topo类，它提供创建可重用的参数化拓扑模板的能力。这些模板可以传递给mn命令（通过&ndash;custom选项）并从命令行使用。</li>
</ul>
<p>了解每个 API 级别很有价值。一般来说，当你想直接控制节点和交换机时，你会使用低级 API。当您想要启动或停止网络时，通常使用中级 API（尤其是Mininet类）。</p>
<p>当您开始考虑创建完整的网络时，通常会希望选择中级 API（例如Mininet.add*()）或高级 API ( Topo.add*()) 来创建您的网络。</p>
<h4 id="低级-api节点和链接">低级 API：节点和链接</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h1 = Host( <span style="color:#a50">&#39;h1&#39;</span> )
</span></span><span style="display:flex;"><span>h2 = Host( <span style="color:#a50">&#39;h2&#39;</span> )
</span></span><span style="display:flex;"><span>s1 = OVSSwitch( <span style="color:#a50">&#39;s1&#39;</span>, inNamespace=<span style="color:#00a">False</span> )
</span></span><span style="display:flex;"><span>c0 = Controller( <span style="color:#a50">&#39;c0&#39;</span>, inNamespace=<span style="color:#00a">False</span> )
</span></span><span style="display:flex;"><span>Link( h1, s1 )
</span></span><span style="display:flex;"><span>Link( h2, s1 )
</span></span><span style="display:flex;"><span>h1.setIP( <span style="color:#a50">&#39;10.1/8&#39;</span> )
</span></span><span style="display:flex;"><span>h2.setIP( <span style="color:#a50">&#39;10.2/8&#39;</span> )
</span></span><span style="display:flex;"><span>c0.start()
</span></span><span style="display:flex;"><span>s1.start( [ c0 ] )
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( h1.cmd( <span style="color:#a50">&#39;ping -c1&#39;</span>, h2.IP() ) )
</span></span><span style="display:flex;"><span>s1.stop()
</span></span><span style="display:flex;"><span>c0.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="中级-api网络对象">中级 API：网络对象</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>net = Mininet()
</span></span><span style="display:flex;"><span>h1 = net.addHost( <span style="color:#a50">&#39;h1&#39;</span> )
</span></span><span style="display:flex;"><span>h2 = net.addHost( <span style="color:#a50">&#39;h2&#39;</span> )
</span></span><span style="display:flex;"><span>s1 = net.addSwitch( <span style="color:#a50">&#39;s1&#39;</span> )
</span></span><span style="display:flex;"><span>c0 = net.addController( <span style="color:#a50">&#39;c0&#39;</span> )
</span></span><span style="display:flex;"><span>net.addLink( h1, s1 )
</span></span><span style="display:flex;"><span>net.addLink( h2, s1 )
</span></span><span style="display:flex;"><span>net.start()
</span></span><span style="display:flex;"><span><span style="color:#0aa">print</span>( h1.cmd( <span style="color:#a50">&#39;ping -c1&#39;</span>, h2.IP() ) )
</span></span><span style="display:flex;"><span>CLI( net )
</span></span><span style="display:flex;"><span>net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="高级-api拓扑模板">高级 API：拓扑模板</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">SingleSwitchTopo</span>( Topo ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Single Switch Topology&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">build</span>( self, count=<span style="color:#099">1</span> ):
</span></span><span style="display:flex;"><span>        hosts = [ self.addHost( <span style="color:#a50">&#39;h</span><span style="color:#a50">%d</span><span style="color:#a50">&#39;</span> % i )
</span></span><span style="display:flex;"><span>                  <span style="color:#00a">for</span> i <span style="color:#00a">in</span> <span style="color:#0aa">range</span>( <span style="color:#099">1</span>, count + <span style="color:#099">1</span> ) ]
</span></span><span style="display:flex;"><span>        s1 = self.addSwitch( <span style="color:#a50">&#39;s1&#39;</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#00a">for</span> h <span style="color:#00a">in</span> hosts: 
</span></span><span style="display:flex;"><span>            self.addLink( h, s1 )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>net = Mininet( topo=SingleSwitchTopo( <span style="color:#099">3</span> ) )
</span></span><span style="display:flex;"><span>net.start()
</span></span><span style="display:flex;"><span>CLI( net ) 
</span></span><span style="display:flex;"><span>net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><p>如您所见，中级 API 对于本示例实际上是最简单和最简洁的，不需要创建拓扑类。低级和中级 API 灵活而强大，但与高级TopoAPI 及其拓扑模板相比，重用起来可能不太方便。</p>
<p>另请注意，在 2.2.0 之前的 Mininet 版本中，高层Topo不支持节点之间的多链接，但低层 API 支持。目前Topo也不关心哪些坏过压保护由哪些控制器控制（您可以使用自定义Switch子类来执行此操作，如上所述。）使用中级和低级 API，您可以根据需要手动启动交换机，将适当的控制器列表传递给每个交换机。</p>
<h4 id="mininet-api-文档">Mininet API 文档</h4>
<p>Mininet 包含每个模块和 API 调用的 Python 文档字符串。这些可以从 Python 的常规help()机制访问。例如，</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>&gt;&gt;&gt; <span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.node</span> <span style="color:#00a">import</span> Host
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; help(Host.IP)
</span></span><span style="display:flex;"><span>Help on method IP <span style="color:#00a">in</span> module mininet.node:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>IP(self, intf=<span style="color:#00a">None</span>) unbound mininet.node.Host method
</span></span><span style="display:flex;"><span>    Return IP address of a node <span style="color:#00a">or</span> specific interface.
</span></span></code></pre></td></tr></table>
</div>
</div><p>同样的文档也可以在 <a href="http://api.mininet.org" target="_blank" rel="noopener noreffer ">Mininet 网站</a>上找到。</p>
<h4 id="测试性能">测试性能</h4>
<p>这些是推荐的工具。</p>
<ol>
<li>带宽 ( bwm-ng, ethstats)</li>
<li>延迟（使用ping）</li>
<li>队列（使用tc包含在monitor.py）</li>
<li>TCPCWND统计信息（tcp_probe，也许我们应该将其添加到monitor.py）</li>
<li>CPU 使用率（全局：top或每个容器cpuacct）</li>
</ol>
<h3 id="openflow-和自定义路由">OpenFlow 和自定义路由</h3>
<p>Mininet 最强大和最有用的功能之一是它使用 软件定义网络。</p>
<p>使用OpenFlow协议和相关工具，可以对交换机进行编程，以对进入它们的数据包执行几乎任何您想要的操作。</p>
<p>OpenFlow 使像 Mininet 这样的仿真器变得更加有用，因为网络系统设计（包括使用 OpenFlow 的自定义数据包转发）可以轻松地转移到硬件 OpenFlow 交换机以进行线速操作。</p>
<p><a href="https://github.com/mininet/openflow-tutorial/wiki" target="_blank" rel="noopener noreffer ">Mininet OpenFlow 教程</a></p>
<h4 id="openflow控制器">OpenFlow控制器</h4>
<p>如果你想使用你自己的控制器，你可以很容易地创建一个自定义的子类Controller()并将它传递到 Mininet 中。可以在mininet.controller.NOX()中看到一个示例，它使用一组作为选项传入的模块调用 NOX classic。</p>
<p>下面是创建和使用自定义 POXController子类的简单示例：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#aaa;font-style:italic">#!/usr/bin/python                                                                                      </span>
</span></span><span style="display:flex;"><span>                                                                                                       
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.net</span> <span style="color:#00a">import</span> Mininet                                                                        
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.node</span> <span style="color:#00a">import</span> Controller                                                                    
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.topo</span> <span style="color:#00a">import</span> SingleSwitchTopo                                                              
</span></span><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">mininet.log</span> <span style="color:#00a">import</span> setLogLevel                                                                    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">import</span> <span style="color:#0aa;text-decoration:underline">os</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">POXBridge</span>( Controller ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Custom Controller class to invoke POX forwarding.l2_learning&#34;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">start</span>( self ):
</span></span><span style="display:flex;"><span>        <span style="color:#a50">&#34;Start POX learning switch&#34;</span>
</span></span><span style="display:flex;"><span>        self.pox = <span style="color:#a50">&#39;</span><span style="color:#a50">%s</span><span style="color:#a50">/pox/pox.py&#39;</span> % os.environ[ <span style="color:#a50">&#39;HOME&#39;</span> ]
</span></span><span style="display:flex;"><span>        self.cmd( self.pox, <span style="color:#a50">&#39;forwarding.l2_learning &amp;&#39;</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">stop</span>( self ):
</span></span><span style="display:flex;"><span>        <span style="color:#a50">&#34;Stop POX&#34;</span>
</span></span><span style="display:flex;"><span>        self.cmd( <span style="color:#a50">&#39;kill %&#39;</span> + self.pox )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>controllers = { <span style="color:#a50">&#39;poxbridge&#39;</span>: POXBridge }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">if</span> __name__ == <span style="color:#a50">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    setLogLevel( <span style="color:#a50">&#39;info&#39;</span> )
</span></span><span style="display:flex;"><span>    net = Mininet( topo=SingleSwitchTopo( <span style="color:#099">2</span> ), controller=POXBridge )
</span></span><span style="display:flex;"><span>    net.start()
</span></span><span style="display:flex;"><span>    net.pingAll()
</span></span><span style="display:flex;"><span>    net.stop()
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="外部-openflow-控制器">外部 OpenFlow 控制器</h4>
<p>自定义Controller()子类是自动启动和关闭控制器的最方便的方法。创建start()和stop()方法很容易，这样 Mininet 将根据需要自动启动和停止您的控制器。</p>
<p>可以使用RemoteController将 Mininet 连接到已经在其他地方运行的现有控制器，例如 LAN 上的某个地方、另一个 VM 中或笔记本电脑上。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">functools</span> <span style="color:#00a">import</span> partial
</span></span><span style="display:flex;"><span>net = Mininet( topo=topo, controller=partial( RemoteController, ip=<span style="color:#a50">&#39;127.0.0.1&#39;</span>, port=<span style="color:#099">6633</span> ) )
</span></span></code></pre></td></tr></table>
</div>
</div><p>或者</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>net = Mininet( topo=topo, controller=<span style="color:#00a">lambda</span> name: RemoteController( name, ip=<span style="color:#a50">&#39;127.0.0.1&#39;</span> ) )
</span></span></code></pre></td></tr></table>
</div>
</div><p>甚至</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>net = Mininet( topo=topo, controller=<span style="color:#00a">None</span>)
</span></span><span style="display:flex;"><span>net.addController( <span style="color:#a50">&#39;c0&#39;</span>, controller=RemoteController, ip=<span style="color:#a50">&#39;127.0.0.1&#39;</span>, port=<span style="color:#099">6633</span> )
</span></span></code></pre></td></tr></table>
</div>
</div><p>请注意，在这种情况下， controller（如host和switch）是一个构造函数，而不是一个对象（但请参阅下面的附加信息！）您可以使用partial或lambda在线创建自定义构造函数，或者您可以传入自己的函数（必须采用name参数并返回控制器对象）或类（例如RemoteController的子类）</p>
<p>您还可以创建多个控制器并创建一个自定义Switch()子类，根据需要连接到不同的控制器：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>c0 = Controller( <span style="color:#a50">&#39;c0&#39;</span> )  <span style="color:#aaa;font-style:italic"># local controller</span>
</span></span><span style="display:flex;"><span>c1 = RemoteController( <span style="color:#a50">&#39;c1&#39;</span>, ip=<span style="color:#a50">&#39;127.0.0.2&#39;</span> )  <span style="color:#aaa;font-style:italic"># external controller</span>
</span></span><span style="display:flex;"><span>cmap = { <span style="color:#a50">&#39;s1&#39;</span>: c0, <span style="color:#a50">&#39;s2&#39;</span>: c1, <span style="color:#a50">&#39;s3&#39;</span>: c1 }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">MultiSwitch</span>( OVSSwitch ):
</span></span><span style="display:flex;"><span>    <span style="color:#a50">&#34;Custom Switch() subclass that connects to different controllers&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a">def</span> <span style="color:#0a0">start</span>( self, controllers ):
</span></span><span style="display:flex;"><span>        <span style="color:#00a">return</span> OVSSwitch.start( self, [ cmap[ self.name ] ] )
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="通过传入控制器对象调用-api">通过传入控制器对象调用 API</h4>
<p>在 Mininet 2.2.0 及更高版本中，您可以选择传入Controller 对象而不是构造函数（甚至是对象列表）。添加此选项是因为尽管 API 明确指定需要构造函数，但人们仍在这样做.</p>
<p>这使您可以执行以下操作：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>net = Mininet( topo, controller=RemoteController( <span style="color:#a50">&#39;c0&#39;</span>, ip=<span style="color:#a50">&#39;127.0.0.1&#39;</span> ) )
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="多路径路由">多路径路由</h4>
<p>重要的是要记住，以太网桥（也称为学习交换机）会淹没在其 MAC 表中丢失的数据包。它们还会像 ARP 和 DHCP 请求一样泛滥广播。这意味着，如果您的网络中有环路或多条路径，它无法将默认ovs-controller与充当学习交换机/以太网桥的controller控制器|NOX的pyswitch|POX的l2_learning一起使用。</p>
<p>更新（和更复杂）的 OpenFlow 控制器确实支持多路径路由 - 请查阅控制器的文档以确定是否需要任何特殊配置。</p>
<p>如果您正在构建类似胖树的拓扑结构，您可能希望查看 RipLPOX，这是一个使用 POX 实现的基本数据中心控制器。您可以将其用作您自己的自定义多路径路由的起点。</p>
<p>为了方便起见，您可能还希望实现一个自定义Controller()子类来调用 RipLPOX。</p>
<h3 id="更新-mininet">更新 Mininet</h3>
<p>两种方式</p>
<ol>
<li>使用指向 Mininet 源代码树的符号链接更新（使更新 Mininet 的 python 代码变得容易）。</li>
</ol>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0aa">cd</span> ~/mininet
</span></span><span style="display:flex;"><span>    git checkout master <span style="color:#aaa;font-style:italic"># assuming you want to update to the current master branch</span>
</span></span><span style="display:flex;"><span>sudo make develop <span style="color:#aaa;font-style:italic"># this only needs to be done initially and when mnexec.c changes</span>
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>git pull --rebase
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>将 Mininet 源代码复制到 /usr/lib/python&hellip;（允许您删除或移动 Mininet 源代码树）：</li>
</ol>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0aa">cd</span> ~/mininet
</span></span><span style="display:flex;"><span>    git checkout master <span style="color:#aaa;font-style:italic"># assuming you want to update to the current master branch</span>
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>git pull --rebase
</span></span><span style="display:flex;"><span>sudo make install
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="学习python">学习Python</h3>
<p>详见<a href="/tags/python%e6%95%99%e7%a8%8b/" rel="">Python教程</a></p>
<h3 id="它是如何工作的">它是如何工作的</h3>
<p>Mininet 背后的魔力是 Linux 中内置的一组功能，允许将单个系统拆分为一堆较小的“容器”，每个容器具有固定份额的处理能力，并结合允许链接准确的虚拟链接代码延迟和速度。</p>
<p>在内部，Mininet 采用 Linux 内核中的轻量级虚拟化功能，包括进程组、CPU 带宽隔离和网络命名空间，并将它们与链接调度程序和虚拟以太网链接相结合。与使用完整虚拟机的仿真器相比，这些功能产生的系统启动速度更快，可扩展到更多主机。</p>
<p>Mininet 网络由以下组件组成：</p>
<ol>
<li>孤立的主机。Mininet 中的模拟主机是一组移动到网络命名空间中的用户级进程 - 网络状态的容器。网络名称空间为进程组提供接口、端口和路由表（例如 ARP 和 IP）的独占所有权。例如，两个网络命名空间中的两个 Web 服务器可以在一个系统中共存，它们都监听端口 80 上的私有 eth0 接口。Mininet 使用 CPU 带宽限制来限制每个进程组可用的 CPU 比例。</li>
<li>模拟链接。每个链路的数据速率由 Linux 流量控制 ( tc) 强制执行，它有许多数据包调度程序来将流量调整为配置的速率。每个模拟主机都有自己的虚拟以太网接口（使用 ip link add/set 创建和安装）。虚拟以太网（或veth）对，就像连接两个虚拟接口或虚拟交换机端口的电线一样；通过一个接口发送的数据包被传送到另一个接口，每个接口对所有系统和应用程序软件来说都是一个功能齐全的以太网端口。</li>
<li>仿真交换机。Mininet 通常使用在内核模式下运行的默认 Linux 网桥或 Open vSwitch 来跨接口交换数据包。交换机和路由器可以在内核中运行（为了速度）或在用户空间中运行（因此我们可以轻松修改它们）。</li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-11-29
    

    
        

        
        
            <span id="busuanzi_container_value_page_pv"><i class="far fa-eye fa-fw"></i>
                
                <span id="busuanzi_value_page_pv"></span>&nbsp;views</span>
        
    

</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" data-title="Python-第三方库-mininet-Mininet简介" data-hashtags="mininet,Python第三方库"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" data-hashtag="mininet"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" data-title="Python-第三方库-mininet-Mininet简介"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" data-title="Python-第三方库-mininet-Mininet简介"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://oublie6.github.io/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E7%AE%80%E4%BB%8B/" data-title="Python-第三方库-mininet-Mininet简介"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/mininet/">mininet</a>,&nbsp;<a href="/tags/python%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/">Python第三方库</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/python/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/mininet/mininet%E6%BC%94%E7%BB%83/" class="prev" rel="prev" title="Python-第三方库-mininet-mininet演练"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Python-第三方库-mininet-mininet演练</a>
            <a href="/posts/p4/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" class="next" rel="next" title="P4-学习资料">P4-学习资料<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main>
    
        
        <script async src=" //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js "></script>
    

    
        
            <section>
                
                    <span id="busuanzi_container_value_site_pv"><i class="far fa-eye fa-fw"></i>
                        
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                

                
                    &nbsp;|&nbsp;              
                

                
                    <span id="busuanzi_container_value_site_uv"><i class="fa fa-user"></i>
                        
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
            </section>
        

        
        
    

<script src="/js/xxx.js"></script>
</div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"gitalk":{"admin":["oublie6"],"clientID":"161f711b5310ee2521fa","clientSecret":"0bbbc4a0ed58220489334176a48a3c0898c1538a","id":"2022-11-29T11:18:06+08:00","owner":"oublie6","repo":"oublie6.github.io","title":"Python-第三方库-mininet-Mininet简介"}},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
